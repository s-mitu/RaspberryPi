<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>BSD tank コントロール</title>
<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<script type="text/javascript">
	function onClickFront() {
		$.ajax({url:"/front",
				success: function() {
					$("#idNowStatus").text("前進")}});
	}
	function onClickBack() {
		$.ajax({url:"/back",
				success: function() {
					$("#idNowStatus").text("後進")}});
	}
	function onClickStop() {
		$.ajax({url:"/stop",
				success: function() {
					$("#idNowStatus").text("停止")}});
	}
	function onClickPivotTurnR() {
		$.ajax({url:"/pivotturn_r",
				success: function() {
					$("#idNowStatus").text("超信地旋回(R)")}});
	}
	function onClickPivotTurnL() {
		$.ajax({url:"/pivotturn_l",
				success: function() {
					$("#idNowStatus").text("超信地旋回(L)")}});
	}
	function onClickSwing() {
		$.ajax({url:"/swing",
				success: function() {
					$("#idNowStatus").text("停止")}});
	}
#	function updateDistance() {
#		$.ajax({url:"/distance.json",
#				datatype: "json",
#				success: function(json) {
#					$("#idDist").text(json.dist);
#				}});
#	}
#	$(function () {
#		updateDistance();
#		setInterval("updateDistance()", 2000);
#	});
</script>
</head>
<body>
<h1></h1>
<button id="idFront" onClick="onClickFront()">前進</button>
<button id="idBack" onClick="onClickBack()">後進</button>
<button id="idPivotTurnR" onClick="onClickPivotTurnR()">超信地旋回(R)</button>
<button id="idPivotTurnL" onClick="onClickPivotTurnL()">超信地旋回(L)</button>
<button id="idSwing" onClick="onClickSwing()">スイング</button>
<button id="idStop" onClick="onClickStop()">停止</button>
<div id="idStatusArea">
Control Status:<div id="idNowStatus">停止</div>
Distance: <div id="idDist"></div> [cm]
</div>
<hr/>
<table>
	<tr>
		<td>
<a class="twitter-timeline" data-width="400" data-height="500" data-theme="dark" href="https://twitter.com/freebsdtank?ref_src=twsrc%5Etfw">Tweets by freebsdtank</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
</div>
		</td>
		<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
		<td>
<div id="idCameraArea">
        <script>
			function reloadimg(){
				camera.src = "camera.jpg?r=" + Math.random();
			}
			function setreload(timer){
				setTimeout('reloadimg()',timer);
			}
		</script>
		<img name="camera" width="800" height="600" src="camera.jpg" onload="setreload(1000)" onerror="setreload(5000)"/>
</div>
		</td>
	</tr>
</table>
</body>
</html>
